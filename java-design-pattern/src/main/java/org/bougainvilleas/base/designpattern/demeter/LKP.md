[toc]
# LKP/LoD
## Least Knowledge Principle
## Law of Demeter
- Only talk to your immediate friends
## 最少知识原则
## 迪米特法则
- 一个对象应该对其他对象有最少的了解
- 一个类应该对自己需要耦合或调用的类知道得最少
## 低耦合含义
- Only talk to your immediate friends
```text
只和朋友交流，两个对象之间的耦合就称为朋友关系，这种关系的类型有很多，例如组合、聚合、依赖等
朋友类的定义：出现在成员变量、方法的输入输出参数中的类称为成员朋友类，而出现在方法体内部的类不属于朋友类
类与类之间的关系是建立在类间的，而不是方法间，因此一个方法尽量不引入一个类中不存在的对象（JDK API提供的类除外）
```
- 朋友间也是有距离的
```text
一个类公开的public属性或方法越多，修改时涉及的面也就越大，变更引起的风险扩散也就越大。
因此，为了保持朋友类间的距离，在设计时需要反复衡量：
是否还可以再减少public方法和属性，
是否可以修改为private、package-private（包类型，在类、方法、变量前不加访问权限，则默认为包类型）、protected等访问权限，
是否可以加上final关键字等
```
- 是自己的就是自己的
```text
如果一个方法放在本类中，既不增加类间关系，也对本类不产生负面影响，那就放置在本类中
```
- 谨慎使用Serializable
```text
项目中使用RMI（RemoteMethod Invocation，远程方法调用）方式传递一个VO（Value Object，值对象），
这个对象就必须实现Serializable接口（仅仅是一个标志性接口，不需要实现具体的方法），也就是把需要网络传输的对象进行序列化，
否则就会出现NotSerializableException异常
客户端的VO修改了一个属性的访问权限，从private变更为public，访问权限扩大了，如果服务器上没有做出相应的变更，就会报序列化失败
```
# 注意
- 迪米特法则要求类尽量不要对外公布太多的public方法和非静态的public变量，尽量内敛，多使用private、package-private、protected等访问权限
## 最佳实践
- 高内聚低耦合
```text
迪米特法则的核心观念就是类间解耦，弱耦合，
只有弱耦合了以后，类的复用率才可以提高。
其要求的结果就是产生了大量的中转或跳转类，导致系统的复杂性提高，同时也为维护带来了难度。
在采用迪米特法则时需要反复权衡，既做到让结构清晰，又做到高内聚低耦合
```