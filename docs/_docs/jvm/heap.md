---
layout: content
title: heap area
targets:
  - name: Top
    link: heap-area
  - name: æ¦‚è¿°
    link: æ¦‚è¿°
  - name: æ€»ç»“
    link: æ€»ç»“
  - name: åˆ†ä»£æ€æƒ³
    link: åˆ†ä»£æ€æƒ³
  - name: ğŸš¦&emsp;æ–°ç”Ÿä»£
    link: æ–°ç”Ÿä»£
  - name: ğŸš¦&emsp;è€å¹´ä»£
    link: è€å¹´ä»£
  - name: ğŸš¦&emsp;å¯¹è±¡åˆ†é…å†…å­˜è¿‡ç¨‹
    link: å¯¹è±¡åˆ†é…å†…å­˜è¿‡ç¨‹
  - name: ğŸš¦&emsp;å†…å­˜åˆ†é…ç­–ç•¥
    link: å†…å­˜åˆ†é…ç­–ç•¥
  - name: ğŸš¦&emsp;heap areaæ˜¯åˆ†é…å¯¹è±¡å­˜å‚¨ä½ç½®çš„å”¯ä¸€é€‰æ‹©
    link: heap-areaæ˜¯åˆ†é…å¯¹è±¡å­˜å‚¨ä½ç½®çš„å”¯ä¸€é€‰æ‹©
  - name: ğŸš¦&emsp;é€ƒé€¸åˆ†æ
    link: escape-analysis
  - name: ğŸš¦&emsp;æ ˆä¸Šåˆ†é…
    link: æ ˆä¸Šåˆ†é…
  - name: ğŸš¦&emsp;é”æ¶ˆé™¤
    link: é”æ¶ˆé™¤
  - name: ğŸš¦&emsp;æ ‡é‡æ›¿æ¢
    link: æ ‡é‡æ›¿æ¢
---

# heap area

> [Garbage Collection å‚è€ƒ](../gc)\
> [å†…å­˜åˆ†æå·¥å…·å‚è€ƒ](../tools)\
> [Oracle å®˜ç½‘æ–‡æ¡£](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.5.3)
>
> The Java Virtual Machine has a heap that is shared among all Java Virtual Machine threads. The heap is the `run-time data area` from which memory for `all class instances` and `arrays` is allocated<sub>åˆ†é…</sub>.
>
> The heap is created on virtual machine start-up. Heap storage<sub>å­˜å‚¨</sub> for objects is reclaimed<sub>å›æ”¶çš„</sub> by an automatic storage management system (known as a `garbage collector`); objects are never explicitly<sub>æ˜¾ç¤ºåœ°</sub> deallocated<sub>å–æ¶ˆåˆ†é…</sub>. The Java Virtual Machine assumes<sub>å‡å®š</sub> no particular<sub>ç‰¹åˆ«çš„</sub> type of automatic storage management system, and the storage management technique<sub>æŠ€æœ¯</sub> may be chosen according<sub>ç›¸åº”çš„</sub> to the implementor's<sub>å®ç°è€…</sub> system requirements<sub>ç³»ç»Ÿéœ€æ±‚</sub>. The heap may be of a fixed<sub>å›ºå®šçš„</sub> size or may be expanded<sub>æ‰©å±•</sub> as required by the computation<sub>è®¡ç®—</sub> and may be contracted<sub>æ”¶ç¼©</sub> if a larger heap becomes unnecessary. The memory for the heap does not need to be contiguous<sub>è¿ç»­çš„</sub>.
>
> *A Java Virtual Machine implementation may provide the programmer or the user control over the initial size of the heap, as well as, if the heap can be dynamically expanded or contracted, control over the maximum and minimum heap size.*
>
> The following exceptional<sub>å¼‚å¸¸çš„</sub> condition<sub>æƒ…å†µ</sub> is associated<sub>ç›¸å…³çš„</sub> with the heap:
> - If a computation requires more heap than can be made available by the automatic storage management system, the Java Virtual Machine throws an `OutOfMemoryError`.

## æ¦‚è¿°

- ä¸€ä¸ª`JVMè¿›ç¨‹`åªå­˜åœ¨ä¸€ä¸ª`heap area`ï¼Œæ˜¯`java`å†…å­˜ç®¡ç†çš„**æ ¸å¿ƒåŒºåŸŸ**
- `heap area`åœ¨JVMå¯åŠ¨æ—¶å³è¢«åˆ›å»ºï¼Œå…¶ç©ºé—´å¤§å°ä¹Ÿéšå³ç¡®å®š<sub>`heap area size`æ˜¯å¯ä»¥è°ƒèŠ‚çš„</sub>ï¼Œæ˜¯JVMç®¡ç†çš„æœ€å¤§ä¸€å—å†…å­˜ç©ºé—´
- `jvmè§„èŒƒ`è§„å®š`heap area`å¯ä»¥å¤„äºç‰©ç†ä¸Š**ä¸è¿ç»­**çš„å†…å­˜ç©ºé—´ä¸­ï¼Œä½†åœ¨**é€»è¾‘ä¸Š**å®ƒåº”è¯¥è¢«è§†ä¸º**è¿ç»­çš„**
- æ‰€æœ‰çº¿ç¨‹å…±äº« `heap area`. åœ¨è¿™é‡Œè¿˜å¯ä»¥åˆ’åˆ†çº¿ç¨‹ç§æœ‰çš„**ç¼“å†²åŒº**[TLAB](../tlab)<sub>Thread local allocation buffer</sub>
- **æ•°ç»„**å’Œ**å¯¹è±¡å®ä¾‹**å¯èƒ½æ°¸è¿œä¸ä¼šå­˜å‚¨åœ¨`jvm stack`ä¸Šï¼Œå› ä¸º`stack frame`ä¸­ä¿å­˜**æŒ‡å‘å¯¹è±¡æˆ–è€…æ•°ç»„åœ¨å †ä¸­çš„ä½ç½®çš„å¼•ç”¨**
- åœ¨æ–¹æ³•ç»“æŸåï¼Œ`heap area`ä¸­å¯¹è±¡å®ä¾‹ä¸ä¼šé©¬ä¸Šè¢«ç§»é™¤ï¼Œä»…ä»…åœ¨åƒåœ¾æ”¶é›†çš„æ—¶å€™æ‰ä¼šè¢«ç§»é™¤
- `heap area` æ˜¯`Garbage Collection`æ‰§è¡Œåƒåœ¾å›æ”¶çš„é‡ç‚¹åŒºåŸŸ

## æ€»ç»“

- `YoungGenerationSpace`æ˜¯å¯¹è±¡**è¯ç”Ÿã€æˆé•¿ã€æ¶ˆäº¡**çš„åŒºåŸŸï¼Œä¸€ä¸ªå¯¹è±¡åœ¨è¿™é‡Œäº§ç”Ÿã€åº”ç”¨ï¼Œæœ€åè¢«åƒåœ¾å›æ”¶å™¨æ”¶é›†ã€ç»“æŸç”Ÿå‘½
- `TenureGenerationSpace`æ”¾ç½®**é•¿ç”Ÿå‘½å‘¨æœŸ**çš„å¯¹è±¡ï¼Œé€šå¸¸éƒ½æ˜¯ä»`SurvivoråŒº`ç­›é€‰æ‹·è´è¿‡æ¥çš„Javaå®ä¾‹å¯¹è±¡
  - ç‰¹æ®Šæƒ…å†µ
    - æ™®é€šçš„å¯¹è±¡ä¼˜å…ˆå°è¯•åˆ†é…åœ¨[TLAB](../tlab)<sub>Thread local allocation buffer</sub>ä¸Š
    - å¯¹è±¡è¾ƒå¤§`JVM`è¯•å›¾ç›´æ¥åˆ†é…åœ¨`Eden`åŒº
    - å¯¹è±¡å¤ªå¤§æ— æ³•åœ¨`YongåŒº`æ‰¾åˆ°è¶³å¤Ÿé•¿çš„**è¿ç»­ç©ºé—²**ç©ºé—´ï¼Œ`JVM`ç›´æ¥åˆ†é…åˆ°`OldåŒº`
- `MinorGC`åªå‘ç”Ÿåœ¨`YoungåŒº`ï¼Œå‘ç”Ÿé¢‘ç‡æ¯”`MajorGC`é«˜å¾ˆå¤šï¼Œæ•ˆç‡ä¹Ÿæ¯”`MajorGC`é«˜`10`å€ä»¥ä¸Š
- å½“`GC`å‘ç”Ÿåœ¨`OldåŒº`åˆ™ç§°ä¸º`MajorGC`æˆ–`FullGC`

## åˆ†ä»£æ€æƒ³

> 1. ç»ç ”ç©¶ï¼Œä¸åŒå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸åŒï¼Œ70%~99%çš„å¯¹è±¡æ˜¯**ä¸´æ—¶å¯¹è±¡**
>    1. æ–°ç”Ÿä»£: ç”±`Eden`ã€`ä¸¤`å—`å¤§å°ç›¸åŒ`çš„`Survivor`åŒº<sub>`s0åŒº`ã€`s1åŒº`æˆ–`fromåŒº`ã€`toåŒº`.`toåŒº`æ€»æ˜¯ç©ºçš„</sub>æ„æˆ
>    2. è€å¹´ä»£: å­˜æ”¾æ–°ç”Ÿä»£ä¸­ç»å†**å¤šæ¬¡**`GC`ä»å­˜æ´»çš„å¯¹è±¡
> 2. ä¸åˆ†ä»£å®Œå…¨å¯ä»¥
>
> åˆ†ä»£çš„å”¯ä¸€ç†ç”±å°±æ˜¯**ä¼˜åŒ–**`GC`æ€§èƒ½.\
> å¦‚æœæ²¡æœ‰åˆ†ä»£ï¼Œå°†æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½æ”¾åœ¨ä¸€å—ï¼Œ`GC`æ—¶å¯»æ‰¾å“ªäº›å¯¹è±¡å®ä¾‹æ²¡æœ‰è¢«ä½¿ç”¨ï¼Œæ­¤æ—¶éœ€è¦å¯¹æ‰€æœ‰åŒºåŸŸè¿›è¡Œæ‰«æï¼Œ`STW`<sub>stop the world</sub>æ—¶é—´ç›¸å¯¹åˆ†ä»£ç­–ç•¥ä¼šå˜é•¿.\
> å¾ˆå¯¹å¯¹è±¡å®ä¾‹éƒ½æ˜¯**æœç”Ÿå¤•æ­»**.\
> å¦‚æœåˆ†ä»£ï¼ŒæŠŠæ–°åˆ›å»ºçš„å¯¹è±¡å®ä¾‹æ”¾åˆ°æŸä¸€åœ°æ–¹ï¼Œ`GC`æ—¶å…ˆæŠŠè¿™å—å­˜å‚¨æ–°åˆ›å»ºå¯¹è±¡å®ä¾‹çš„åŒºåŸŸè¿›è¡Œå›æ”¶ï¼Œ`STW`æ—¶é—´ç›¸å¯¹ä¸åˆ†ä»£çš„æ‰«æå…¨éƒ¨åŒºåŸŸå°‘å¾ˆå¤š

> `JVM`ä¸­çš„javaå®ä¾‹å¯¹è±¡å¯ä»¥è¢«åˆ’åˆ†ä¸ºä¸¤ç±»
> 1. ç”Ÿå‘½å‘¨æœŸè¾ƒçŸ­çš„ç¬æ—¶å¯¹è±¡ï¼Œè¿™ç±»å¯¹è±¡åˆ›å»ºå’Œæ¶ˆäº¡éƒ½éå¸¸è¿…é€Ÿ
> 2. ç”Ÿå‘½å‘¨æœŸéå¸¸é•¿ï¼Œåœ¨æŸäº›æç«¯çš„æƒ…å†µä¸‹è¿˜èƒ½å¤Ÿä¸`JVM`çš„ç”Ÿå‘½å‘¨æœŸä¿æŒä¸€è‡´

> ç°ä»£åƒåœ¾æ”¶é›†å™¨å¤§éƒ¨åˆ†éƒ½åŸºäºåˆ†ä»£æ”¶é›†ç†è®ºè®¾è®¡
> - `Young` == æ–°ç”ŸåŒº == æ–°ç”Ÿä»£ == å¹´è½»ä»£
> - `Old` == å…»è€åŒº == è€å¹´åŒº == è€å¹´ä»£
> - `method area` == æ°¸ä¹…åŒº == æ°¸ä¹…ä»£

| heap area é€»è¾‘ä¸Šåˆ†ä¸ºä¸‰éƒ¨åˆ† | `java7`åŠä¹‹å‰  | `java8`åŠä¹‹å |
|:---|:---|:---|
| `Young` | `Yong Generation Space` æ–°ç”ŸåŒº `Young/New` | åŒå·¦ |
|| `EdenåŒº` | åŒå·¦ |
|| `SurvivoråŒº`<sub>åªæœ‰ä¸€ä¸ªå­˜æ”¾æ•°æ®ï¼Œå½“`jvm`è®¡ç®—å®¹é‡æ—¶åªä¼šè€ƒè™‘**ä¸€ä¸ª**ï¼Œæ‰€ä»¥`Runtime.getRuntime().totalMemory()`å’Œ`Runtime.getRuntime().maxMemory()`çš„å€¼ä¼šå°‘ä¸€ä¸ª`survivoråŒº`çš„å¤§å°</sub> | åŒå·¦ |
|| `Survivor fromåŒº` | åŒå·¦ |
|| `Survivor toåŒº`  | åŒå·¦ |
| `Old` | `Tenure Generation Space` å…»è€åŒº `Old/Tenure` | åŒå·¦ |
| `Method Area`  | `Permanent Space`  æ°¸ä¹…åŒº `Perm` | `Meta Space` å…ƒç©ºé—´ `Meta` |

### æ–°ç”Ÿä»£

> åœ¨`Hotspot`ä¸­`Eden`ç©ºé—´å’Œå¦å¤–ä¸¤ä¸ª`Survivor`ç©ºé—´é»˜è®¤å æ¯”æ˜¯`8ï¼š1ï¼š1` ;é€šè¿‡`-XX:SurvivorRatio=8`è°ƒæ•´æ¯”ä¾‹<sub>é»˜è®¤ä¸º`8`ï¼Œä½†æ˜¯å®é™…æ¯”ä¾‹æ˜¯`6ï¼š1ï¼š1` `-XX:+UseAdaptiveSizePolicy`é»˜è®¤å¼€å¯äº†**è‡ªé€‚åº”å†…å­˜åˆ†é…ç­–ç•¥**ï¼Œæ˜¾å¼è®¾ç½®ä¸º`8`æ‰ä¼šç”Ÿæ•ˆ</sub>\
> **å‡ ä¹æ‰€æœ‰**çš„`Javaå®ä¾‹å¯¹è±¡`éƒ½æ˜¯åœ¨`Eden`åŒºè¢«`new`å‡ºæ¥\
> **ç»å¤§éƒ¨åˆ†**çš„`Javaå®ä¾‹å¯¹è±¡`çš„é”€æ¯éƒ½åœ¨**æ–°ç”Ÿä»£**è¿›è¡Œ
> > `IBM`å…¬å¸çš„ä¸“é—¨ç ”ç©¶è¡¨æ˜ï¼Œ**æ–°ç”Ÿä»£**ä¸­`80%`çš„å¯¹è±¡éƒ½æ˜¯æœç”Ÿå¤•æ­»
>
> å¯ä»¥ä½¿ç”¨é€‰é¡¹`-Xmn`è®¾ç½®`æ–°ç”Ÿä»£`æœ€å¤§å†…å­˜å¤§å°
> > è¿™ä¸ªå‚æ•°ä¸€èˆ¬ä½¿ç”¨é»˜è®¤å€¼å°±å¯ä»¥äº†

### è€å¹´ä»£

> todo

### å¯¹è±¡åˆ†é…å†…å­˜è¿‡ç¨‹

![image](/assets/images/jvm/GC.svg)

> 1. `new`çš„å¯¹è±¡ä¼˜å…ˆå°è¯•æ”¾`Eden`åŒºï¼Œ`Eden`åŒºå¯èƒ½å·²æœ‰å¯¹è±¡
> 2. å¦‚æœ`Eden`åŒºå‰©ä½™ç©ºé—´æ”¾å¾—ä¸‹ï¼Œåˆ™ç›´æ¥åœ¨`Eden`åŒºä¸ºå¯¹è±¡åˆ†é…å†…å­˜
> 3. å¦‚æœ`Eden`åŒºå‰©ä½™ç©ºé—´æ”¾ä¸ä¸‹ï¼Œåˆ™è§¦å‘`Minor GC`<sub>`YGC`</sub>ï¼Œ`YGC`ä¼šå°†`Eden`åŒºå’Œ`From`åŒºæ¸…ç©º
>    1. å°†`Eden`åŒºå’Œ`From`åŒºå†…çš„ä¸å†è¢«å…¶ä»–å¯¹è±¡æ‰€å¼•ç”¨çš„å¯¹è±¡è¿›è¡Œé”€æ¯ã€‚
>    2. å°†`Eden`åŒºå’Œ`From`åŒºå†…å¹¸å­˜çš„å¯¹è±¡ï¼Œç§»åŠ¨åˆ°`To`åŒºï¼Œå¹¶ä¸”**æ ‡è¯†ç§»åŠ¨æ¬¡æ•°**åŠ `1`æ¬¡
>    3. æ­¤æ—¶`Eden`åŒºä¸ºç©ºï¼Œå†æ¬¡åˆ¤æ–­`Eden`åŒºæ˜¯å¦æ”¾å¾—ä¸‹
>        1. æ”¾å¾—ä¸‹åˆ™æ”¾`Eden`åŒº
>        2. æ”¾ä¸ä¸‹åˆ™å°è¯•æ”¾`Old`åŒº<sub>ä¸€èˆ¬æ˜¯è¶…å¤§å¯¹è±¡</sub>
>            1. æ”¾å¾—ä¸‹ï¼Œç›´æ¥å°†å¯¹è±¡æ”¾ç½®åˆ°`Old`åŒº
>            2. æ”¾ä¸ä¸‹ï¼Œåˆ™è§¦å‘`Major GC`ï¼Œå›æ”¶ä¸€æ¬¡`Old`åŒºï¼Œå†è¿›è¡Œåˆ¤æ–­`Old`åŒºæ˜¯å¦æ”¾çš„ä¸‹
>                1. æ”¾å¾—ä¸‹åˆ™ç›´æ¥å°†å¯¹è±¡æ”¾ç½®åˆ°`Old`åŒº
>                2. æ”¾ä¸ä¸‹åˆ™`OOM`
> 4. `Survivor 0`åŒºå’Œ`Survivor 1`åŒº
>    1. å½“`JVMè¿›ç¨‹`ç¬¬ä¸€æ¬¡è§¦å‘`YGC`ã€‚å°†`Eden`åŒºå†…çš„ä¸å†è¢«å…¶ä»–å¯¹è±¡æ‰€å¼•ç”¨çš„å¯¹è±¡è¿›è¡Œé”€æ¯ã€‚
>    2. å°†`Eden`åŒºæ‰€æœ‰å¹¸å­˜å¯¹è±¡ï¼Œå°è¯•ç§»åˆ°`Survivor 0`åŒº<sub>ä¼šå°†`Eden`åŒºæ¸…ç©º</sub>
>        1. å½“`Survivor 0` åŒºç©ºé—´æ”¾å¾—ä¸‹åˆ™æ”¾åœ¨`Survivor 0`åŒºï¼Œ**ç§»åŠ¨æ¬¡æ•°**åŠ `1`
>        2. å¹¸å­˜å¯¹è±¡å¤ªå¤§æ”¾ä¸ä¸‹ï¼Œåˆ™ç›´æ¥æ™‹å‡è€å¹´ä»£ï¼Œæ”¾åˆ°`Old`åŒºï¼Œ**ç§»åŠ¨æ¬¡æ•°**åŠ `1`
>    3. å½“`Eden`åŒºå’Œ`Survivor 0`æˆ–`Survivor 1`åŒºæœ‰æ•°æ®æ—¶è§¦å‘`YGC`ã€‚æ­¤æ—¶`JVM`å°†`Eden`åŒºå’Œ`Survivor 0`åŒº<sub>æ­¤æ—¶`Survivor 0`åŒºä¼šç§°ä¸ºFromåŒº</sub>å†…ä¸å†è¢«å…¶ä»–å¯¹è±¡æ‰€å¼•ç”¨çš„å¯¹è±¡è¿›è¡Œé”€æ¯ã€‚<sub>æ­¤æ—¶çš„`From`åŒºè¦æ ¹æ®å®é™…æƒ…å†µæ¥å®šï¼Œæ­¤å¤„åªæ˜¯ç”¨`Survivor 0`åŒºä½œä¸ºä¾‹å­è¯´æ˜</sub>
>        1. å°è¯•å°†å¹¸å­˜çš„å¯¹è±¡ç§»åŠ¨åˆ°`Survivor 1`åŒº<sub>æ­¤æ—¶ä¹Ÿå«`To`åŒº</sub>ã€‚
>            1. å½“`From`åŒºå¹¸å­˜å¯¹è±¡é˜ˆå€¼ç­‰äºè®¾ç½®çš„å€¼
>                1. åˆ™æ‰§è¡Œ`Promotion`æ™‹å‡åˆ°è€å¹´ä»£`Old`åŒºï¼Œ**ç§»åŠ¨æ¬¡æ•°**åŠ `1`
>            2. å½“FromåŒºå¹¸å­˜å¯¹è±¡é˜ˆå€¼å°äºè®¾ç½®çš„å€¼
>                1. `To`åŒºæ”¾å¾—ä¸‹åˆ™æ”¾åˆ°`To`åŒºï¼Œ**ç§»åŠ¨æ¬¡æ•°**åŠ `1`
>                2. `To`åŒºæ”¾ä¸ä¸‹ç›´æ¥æ”¾`Old`åŒºï¼Œ**ç§»åŠ¨æ¬¡æ•°**åŠ `1`<sub>æ­¤æ—¶`Old`åŒºæ­£å¸¸è®¾ç½®å‚æ•°è‚¯å®šæ”¾çš„ä¸‹ï¼Œå› ä¸º`Young`ç©ºé—´ä¸€èˆ¬éƒ½æ¯”`Old`ç©ºé—´å°</sub>
>    4. ä¹‹åå°±æ˜¯é‡å¤3æ­¥

> æ³¨æ„
> > å½“`EdenåŒº`æ»¡æ—¶æ‰ä¼šè§¦å‘`YGC`ï¼Œ`Survivor 0`æˆ–`Survivor 1`åŒºæ»¡ä¸ä¼šè§¦å‘`YGC`\
> > `YGC`å›æ”¶`EdenåŒº`å’Œ`FromåŒº`<sub>`YGC`åä¼šæ¸…ç©º`Eden`åŒºå’Œ`From`åŒº</sub>\
> > `Survivor 0`åŒºå’Œ`Survivor 1`åŒºå¤§å°`1ï¼š1`ï¼Œè‚¯å®šä¼šæœ‰ä¸€ä¸ªä¸ºç©ºã€‚ä¸ºäº†ä½¿ç”¨**å¤åˆ¶ç®—æ³•**ï¼Œç›®çš„æ˜¯è§£å†³**ç¢ç‰‡åŒ–**é—®é¢˜\
> > `Survivor 0`åŒºå’Œ`Survivor 1`åŒºï¼šå¤åˆ¶ä¹‹åæœ‰äº¤æ¢ï¼Œè°ç©ºè°æ—¶`To`åŒº\
> > `Garbage Collection`é¢‘ç¹åœ¨`Young`åŒºæ”¶é›†ï¼Œå¾ˆå°‘åœ¨`Old`åŒºæ”¶é›†ï¼Œå‡ ä¹ä¸åœ¨`Perm`å’Œ`Meta`æ”¶é›†\
> > å¯¹è±¡å¯èƒ½ç›´æ¥åˆ†é…åœ¨`Old`åŒº\
> > `Eden`åŒºå’Œ`To`åŒºæ»¡äº†ï¼Œå¯¹è±¡å³ä½¿æ²¡è¾¾åˆ°é˜ˆå€¼<sub>`Promotion`</sub>ï¼Œä¹Ÿå¯èƒ½ç›´æ¥æ™‹å‡åˆ°OldåŒº

### å†…å­˜åˆ†é…ç­–ç•¥

> å¯¹è±¡æ™‹å‡è§„åˆ™<sub>`Promotion`</sub>ï¼š
> > å¦‚æœå¯¹è±¡åœ¨`Eden`å‡ºç”Ÿå¹¶ç»è¿‡ç¬¬ä¸€æ¬¡`MinorGC`åä»å­˜æ´»ï¼Œå¹¶ä¸”èƒ½è¢«`Survivor`å®¹çº³ï¼Œå°†è¢«ç§»åŠ¨åˆ°`Survivor`ç©ºé—´ï¼Œå¹¶å°†å¯¹è±¡å¹´é¾„è®¾ä¸º`1`\
> > å¯¹è±¡åœ¨`Survivor`åŒºä¸­æ¯ç†¬è¿‡ä¸€æ¬¡`MinorGC`å¹´é¾„å°±`+1`å²ï¼Œå½“å®ƒçš„å¹´é¾„å¢åŠ åˆ°ä¸€å®šç¨‹åº¦æ—¶<sub>é»˜è®¤`15`å²ï¼Œæ¯ä¸ª`JVM`æ¯ä¸ª`GC`éƒ½æœ‰æ‰€ä¸åŒ</sub>ï¼Œå°±ä¼šæ™‹å‡<sub>`Promotion`</sub>åˆ°è€å¹´ä»£
>
> å¯¹è±¡æ™‹å‡<sub>`Promotion`</sub>Oldçš„å¹´é¾„é˜ˆå€¼ï¼Œå¯ä»¥é€šè¿‡`-XX:MaxTenuringThreshold`æ¥è®¾ç½®
>
> é’ˆå¯¹ä¸åŒå¹´é¾„æ®µçš„å¯¹è±¡åˆ†é…åŸåˆ™ï¼š
> 1. ä¼˜å…ˆåˆ†é…åˆ°`Eden`
> 2. **å¤§å¯¹è±¡**<sub>éœ€è¦è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œæ›´é«˜æ¦‚ç‡è§¦å‘`GC`</sub>ç›´æ¥åˆ†é…åˆ°`Old`.<sub>å°½é‡é¿å…ç¨‹åºä¸­å‡ºç°è¿‡å¤šçš„å¤§å¯¹è±¡</sub>
> 3. é•¿æœŸå­˜æ´»çš„å¯¹è±¡åˆ†é…åˆ°`Old`<sub>ç»è¿‡å¤šæ¬¡YGCä»å­˜æ´»ï¼Œè¾¾åˆ°é˜ˆå€¼åˆ™æ™‹å‡åˆ°è€å¹´ä»£</sub>
> 4. åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤æ–­
>    1. å¦‚æœ`Survivor`åŒºä¸­ç›¸åŒå¹´é¾„çš„æ‰€æœ‰å¯¹è±¡å¤§å°çš„ç»¼åˆå¤§äº`Survivor`ç©ºé—´çš„**ä¸€åŠ**ï¼Œå¹´é¾„å¤§äºæˆ–ç­‰äºè¯¥å¹´é¾„çš„å¯¹è±¡å¯ä»¥ç›´æ¥è¿›å…¥`Old`æ— é¡»è¾¾åˆ°`MaxTenuringThreshold`è®¾ç½®çš„å¹´é¾„
> 5. [ç©ºé—´åˆ†é…æ‹…ä¿](#ç©ºé—´åˆ†é…æ‹…ä¿)
>    1. -XX:HandlePromotionFailure

### ç©ºé—´åˆ†é…æ‹…ä¿

> åœ¨å‘ç”Ÿ`MinorGC`ä¹‹å‰ï¼Œ`jvm`ä¼šæ£€æŸ¥`Old`åŒºæœ€å¤§å¯ç”¨çš„è¿ç»­ç©ºé—´æ˜¯å¦å¤§äº`Young`åŒºæ‰€æœ‰å¯¹è±¡çš„æ€»ç©ºé—´
> 1. å¦‚æœå¤§äºåˆ™æ­¤æ¬¡`MinorGC`æ˜¯å®‰å…¨çš„
> 2. å¦‚æœå°äºåˆ™`jvm`ä¼šæŸ¥çœ‹`-XX:HandlePromotionFailure`è®¾ç½®å€¼æ˜¯å¦è¿è¡Œæ‹…ä¿å¤±è´¥
>    1. å¦‚æœ`-xx:HandlePromotionFailure=true`ä¼šç»§ç»­æ£€æŸ¥`Old`åŒºæœ€å¤§å¯ç”¨è¿ç»­ç©ºé—´æ˜¯å¦å¤§äºå†æ¬¡æ™‹å‡`Old`åŒºçš„å¯¹è±¡çš„å¹³å‡å¤§å°
>        1. å¤§äºï¼Œåˆ™å°è¯•è¿›è¡Œä¸€æ¬¡`MinorGC`ï¼Œä½†è¿™æ¬¡`MinorGC`æ˜¯æœ‰é£é™©çš„
>        2. å°äºï¼Œåˆ™æ”¹ä¸ºè¿›è¡Œä¸€æ¬¡`MajorGC`
>    2. å¦‚æœ`-xx:HandlePromotionFailure=false`åˆ™æ”¹ä¸ºè¿›è¡Œä¸€æ¬¡`MajorGC`
>
> åœ¨`JDK6 Update24`ä¹‹åï¼Œ`HandlePromotionFailure`å‚æ•°ä¸ä¼šå†å½±å“åˆ°`JVM`çš„ç©ºé—´åˆ†é…æ‹…ä¿ç­–ç•¥ï¼Œè™½ç„¶`OpenJDK`æºç ä¸­ä»å®šä¹‰äº†`HandlePromotionFailure`å‚æ•°ï¼Œä½†æ˜¯åœ¨ä»£ç ä¸­å·²ç»ä¸ä¼šå†ä½¿ç”¨å®ƒ. è§„åˆ™å˜æ›´ä¸º
> - `Old`åŒºçš„è¿ç»­ç©ºé—´å¤§äº`Young`åŒºå¯¹è±¡æ€»å¤§å°è¿›è¡Œ`MinorGC`
> - `Old`åŒºçš„è¿ç»­ç©ºé—´å¤§äºå†æ¬¡æ™‹å‡çš„å¹³å‡å¤§å°è¿›è¡Œ`MinorGC`
> - å¦åˆ™è¿›è¡Œ`MajorGC`

### heap areaæ˜¯åˆ†é…å¯¹è±¡å­˜å‚¨ä½ç½®çš„å”¯ä¸€é€‰æ‹©

> éšç€`JIT`ç¼–è¯‘å™¨çš„å‘å±•ä¸[é€ƒé€¸åˆ†æ](#escape-analysis)<sub>Escape Analysis</sub>æŠ€æœ¯é€æ¸æˆç†Ÿï¼Œ[æ ˆä¸Šåˆ†é…](#æ ˆä¸Šåˆ†é…)ã€[æ ‡é‡æ›¿æ¢](#æ ‡é‡æ›¿æ¢)ä¼˜åŒ–æŠ€æœ¯å°†ä¼šå¯¼è‡´ä¸€äº›å¾®å¦™å˜åŒ–ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½åˆ†é…åˆ°`heap area`ä¸Šä¹Ÿæ¸æ¸å˜å¾—ä¸é‚£ä¹ˆç»å¯¹
>
> åœ¨`JVM`ä¸­ï¼Œå¯¹è±¡æ˜¯åœ¨`heap area`ä¸­åˆ†é…å†…å­˜ï¼Œä½†æ˜¯å¦‚æœç»è¿‡[é€ƒé€¸åˆ†æ](#escape-analysis)<sub>Escape Analysis</sub>åå‘ç°ä¸€ä¸ªå¯¹è±¡å¹¶æ²¡æœ‰é€ƒé€¸å‡ºæ–¹æ³•çš„è¯ï¼Œé‚£ä¹ˆå°±å¯èƒ½è¢«ä¼˜åŒ–æˆ[æ ˆä¸Šåˆ†é…](#æ ˆä¸Šåˆ†é…), è¿™æ ·æ— éœ€åœ¨`heap area`ä¸Šåˆ†é…å†…å­˜ï¼Œä¹Ÿä¸éœ€è¦`GC`ï¼Œè¿™ä¹Ÿæ˜¯å¸¸è§çš„**å †å¤–å­˜å‚¨æŠ€æœ¯**
> > ä¾‹å¦‚ï¼š
> > > åŸºäº`OpenJDK`æ·±åº¦å®šåˆ¶çš„`TaoBaoVM`å…¶ä¸­åˆ›æ–°çš„`GCIH`<sub>GC invisible<sub>çœ‹ä¸è§çš„</sub> heap</sub>æŠ€æœ¯å®ç°`off-heap`.\
> > > å°†**ç”Ÿå‘½å‘¨æœŸè¾ƒé•¿**çš„å®ä¾‹å¯¹è±¡ä»`heap area`ä¸­è¿ç§»åˆ°`heap area`å¤–ï¼Œå¹¶ä¸”`GC`ä¸èƒ½ç®¡ç†`GCIH`å†…éƒ¨çš„å®ä¾‹å¯¹è±¡ï¼Œä»¥æ­¤è¾¾åˆ°é™ä½`GC`çš„**å›æ”¶é¢‘ç‡**å’Œæå‡`GC`çš„**å›æ”¶æ•ˆç‡**çš„ç›®çš„

#### Escape Analysis

> **é€ƒé€¸åˆ†æ**<sub>æŠ€æœ¯ä¸æˆç†Ÿ</sub>å†å²
> 1. å…³äº**é€ƒé€¸åˆ†æ**çš„è®ºæ–‡åœ¨`1999å¹´`å°±å·²ç»å‘è¡¨ï¼Œä½†ç›´åˆ°`JDK1.6`æ‰æœ‰å®ç°ï¼Œè€Œä¸”è¿™é¡¹æŠ€æœ¯è‡³ä»Šä¹Ÿä¸æ˜¯ååˆ†æˆç†Ÿ
> 2. åŸå› æ˜¯ï¼šæ— æ³•ä¿è¯**é€ƒé€¸åˆ†æ**çš„æ€§èƒ½ä¸€å®šé«˜äºé€ƒé€¸åˆ†æçš„æ¶ˆè€—
>    - è™½ç„¶ç»è¿‡**é€ƒé€¸åˆ†æ**å¯ä»¥åš[æ ‡é‡æ›¿æ¢](#æ ‡é‡æ›¿æ¢)ã€[æ ˆä¸Šåˆ†é…](#æ ˆä¸Šåˆ†é…)ã€[é”æ¶ˆé™¤](#é”æ¶ˆé™¤)ï¼Œä½†æ˜¯é€ƒé€¸åˆ†æè‡ªèº«ä¹Ÿéœ€è¦è¿›è¡Œä¸€ç³»åˆ—å¤æ‚çš„åˆ†æï¼Œæ˜¯ä¸€ä¸ªç›¸å½“è€—æ—¶çš„è¿‡ç¨‹ã€‚
>    - æç«¯çš„ä¾‹å­ï¼Œç»è¿‡**é€ƒé€¸åˆ†æ**åï¼Œå‘ç°æ²¡æœ‰ä¸€ä¸ªå¯¹è±¡æ˜¯ä¸é€ƒé€¸çš„ï¼Œé‚£ä¹ˆé€ƒé€¸åˆ†æçš„è¿‡ç¨‹å°±ç™½ç™½æµªè´¹æ‰äº†
> 3. è™½ç„¶ä¸æˆç†Ÿï¼Œä½†æ˜¯ä»–æ˜¯`JIT`ç¼–è¯‘å™¨ä¼˜åŒ–æŠ€æœ¯ä¸­ä¸€ä¸ªååˆ†é‡è¦çš„æ‰‹æ®µ
> 4. æœ‰äº›è§‚ç‚¹è®¤ä¸ºï¼Œé€šè¿‡**é€ƒé€¸åˆ†æ**`JVM`ä¼šåœ¨`stack area`ä¸Šåˆ†é…ä¸ä¼šé€ƒé€¸çš„å¯¹è±¡ï¼Œè¿™åœ¨**ç†è®ºä¸Š**æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯å®é™…ä¸Šå–å†³äº`JVM`è®¾è®¡è€…çš„é€‰æ‹©ã€‚
>    - `Oracle Hotspot JVM`å¹¶æœªè¿™ä¹ˆåšï¼Œ**é€ƒé€¸åˆ†æ**çš„ç›¸å…³å®˜æ–¹æ–‡æ¡£å·²ç»è¯´æ˜ï¼Œæ‰€ä»¥å¯ä»¥æ˜ç¡®æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½æ˜¯åˆ›å»ºåœ¨`heap area`ä¸Š
> 5. ç›®å‰å¾ˆå¤šä¹¦ç±è¿˜æ˜¯åŸºäº`JDK7`ä»¥å‰çš„ç‰ˆæœ¬ï¼Œ`JDK`å·²ç»å‘ç”Ÿå¾ˆå¤§å˜åŒ–ï¼Œ
>    - `intern`**å­—ç¬¦ä¸²ç¼“å­˜**å’Œ**é™æ€å˜é‡**æ›¾ç»éƒ½è¢«åˆ†é…åœ¨`Permanent Space`<sub>æ°¸ä¹…ä»£</sub>ä¸Š
>    - è€Œ`Permanent Space`<sub>æ°¸ä¹…ä»£</sub>å·²ç»è¢«`Meta Space`<sub>å…ƒç©ºé—´</sub>å–ä»£
>    - ä½†æ˜¯`intern`**å­—ç¬¦ä¸²ç¼“å­˜**å’Œ**é™æ€å˜é‡**å¹¶ä¸æ˜¯è½¬ç§»åˆ°`Meta Space`<sub>å…ƒç©ºé—´</sub>ï¼Œè€Œæ˜¯ç›´æ¥åœ¨`heap area`ä¸Šåˆ†é…ï¼Œæ‰€ä»¥è¿™ä¸€ç‚¹åŒæ ·ç¬¦åˆï¼šæ‰€æœ‰å¯¹è±¡å®ä¾‹éƒ½æ˜¯åˆ†é…åœ¨`heap area`
>
> æ¦‚è¿°
> - ä½¿ç”¨**é€ƒé€¸åˆ†æ**æ‰‹æ®µå°†æœ¬è¯¥åˆ†é…åˆ°`heap area`ä¸Šçš„å¯¹è±¡åˆ†é…åˆ°`stack`
> - æœ‰æ•ˆå‡å°‘Javaç¨‹åºä¸­**åŒæ­¥è´Ÿè½½**å’Œå†…å­˜`heap area`åˆ†é…å‹åŠ›çš„è·¨å‡½æ•°å…¨å±€æ•°æ®æµåˆ†æç®—æ³•
> - é€šè¿‡**é€ƒé€¸åˆ†æ**ï¼Œ`hotSpot`ç¼–è¯‘å™¨èƒ½å¤Ÿåˆ†æå‡ºä¸€ä¸ªæ–°çš„å¯¹è±¡çš„å¼•ç”¨çš„ä½¿ç”¨èŒƒå›´ä»è€Œå†³å®šæ˜¯å¦è¦å°†è¿™ä¸ªå¯¹è±¡åˆ†é…åˆ°`heap area`ä¸Š
> - **é€ƒé€¸åˆ†æ**çš„åŸºæœ¬è¡Œä¸ºå°±æ˜¯åˆ†æ**å¯¹è±¡åŠ¨æ€ä½œç”¨åŸŸ**
>    1. å½“ä¸€ä¸ªå¯¹è±¡åœ¨æ–¹æ³•ä¸­è¢«å®šä¹‰åï¼Œå¯¹è±¡åªåœ¨æ–¹æ³•å†…éƒ¨ä½¿ç”¨ï¼Œåˆ™è®¤ä¸ºæ²¡æœ‰å‘ç”Ÿé€ƒé€¸
>    2. å½“ä¸€ä¸ªå¯¹è±¡åœ¨æ–¹æ³•ä¸­è¢«å®šä¹‰åï¼Œå®ƒè¢«å¤–éƒ¨æ–¹æ³•æ‰€å¼•ç”¨ï¼Œåˆ™è®¤ä¸ºå‘ç”Ÿé€ƒé€¸ã€‚ä¾‹å¦‚ä½œä¸ºè°ƒç”¨å‚æ•°ä¼ é€’åˆ°å…¶ä»–åœ°æ–¹ä¸­ã€‚
> - æ²¡æœ‰å‘ç”Ÿé€ƒé€¸çš„å¯¹è±¡ï¼Œåˆ™å¯ä»¥åˆ†é…åˆ°`stack`ä¸Šï¼Œéšç€æ–¹æ³•æ‰§è¡Œçš„ç»“æŸï¼Œè¯¥å¯¹è±¡éš`stack frame`ä¸€èµ·è¢«ç§»é™¤ï¼Œä¸éœ€è¦`GC`å°±é‡Šæ”¾å†…å­˜
> - `JDK6u23`åï¼Œ`HotSpot`ä¸­é»˜è®¤å°±å·²ç»å¼€å¯äº†**é€ƒé€¸åˆ†æ**
> - å¦‚æœä½¿ç”¨çš„æ˜¯è¾ƒæ—©çš„ç‰ˆæœ¬
>    - `-XX:+DoEscapeAnalysis`å¼€å¯é€ƒé€¸åˆ†æ
>    - `-XX:+PrintEscapeAnalysis`æŸ¥çœ‹é€ƒé€¸åˆ†æçš„ç­›é€‰ç»“æœ

> *ç»“è®º: å¼€å‘ä¸­èƒ½ä½¿ç”¨**å±€éƒ¨å˜é‡**çš„ï¼Œå°±ä¸è¦åœ¨**æ–¹æ³•å¤–**å®šä¹‰*

> ä»£ç ä¼˜åŒ–
> > [æ ˆä¸Šåˆ†é…](#æ ˆä¸Šåˆ†é…)
> > > å°†`heap area`åˆ†é…è½¬åŒ–ä¸º`stack`åˆ†é…ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡åœ¨å­ç¨‹åºä¸­è¢«åˆ†é…ï¼Œä½¿æŒ‡å‘è¯¥å¯¹è±¡çš„æŒ‡é’ˆæ°¸è¿œä¸ä¼šé€ƒé€¸ï¼Œå¯¹è±¡å¯èƒ½æ˜¯`stack`åˆ†é…çš„å€™é€‰ï¼Œè€Œä¸æ˜¯`heap`åˆ†é…
> >
> > [é”æ¶ˆé™¤](#é”æ¶ˆé™¤)<sub>åŒæ­¥çœç•¥</sub>
> > > å¦‚æœä¸€ä¸ªå¯¹è±¡è¢«å‘ç°åªèƒ½ä»ä¸€ä¸ªçº¿ç¨‹è¢«è®¿é—®åˆ°ï¼Œé‚£ä¹ˆå¯¹äºè¿™ä¸ªå¯¹è±¡çš„æ“ä½œå¯ä»¥ä¸è€ƒè™‘åŒæ­¥
> >
> > [æ ‡é‡æ›¿æ¢](#æ ‡é‡æ›¿æ¢)
> > > æœ‰çš„å¯¹è±¡å¦‚æœä¸éœ€è¦ä½œä¸ºä¸€ä¸ªè¿ç»­çš„å†…å­˜ç»“æ„ä¿å­˜ä¹Ÿå¯ä»¥è¢«è®¿é—®ï¼Œé‚£ä¹ˆå¯¹è±¡çš„ä¸€éƒ¨åˆ†<sub>æˆ–å…¨éƒ¨</sub>å¯ä»¥ä¸å­˜å‚¨åœ¨å†…å­˜ï¼Œè€Œæ˜¯å­˜å‚¨åœ¨`CPUå¯„å­˜å™¨`ä¸­

#### æ ˆä¸Šåˆ†é…

- `JIT`ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸæ ¹æ®[é€ƒé€¸åˆ†æ](#escape-analysis)çš„ç»“æœå‘ç°å¦‚æœä¸€ä¸ªå¯¹è±¡å¹¶æ²¡æœ‰é€ƒé€¸å‡ºæ–¹æ³•ï¼Œå°±**å¯èƒ½**è¢«ä¼˜åŒ–æˆ**æ ˆä¸Šåˆ†é…**
- åˆ†é…å®Œæˆåï¼Œç»§ç»­åœ¨è¯¥çº¿ç¨‹çš„`jvm stack`å†…æ‰§è¡Œï¼Œæœ€åçº¿ç¨‹ç»“æŸï¼Œ`jvm stack`è¢«å›æ”¶ï¼Œ**å±€éƒ¨å˜é‡å¯¹è±¡**ä¹Ÿè¢«å›æ”¶ï¼Œè¿™æ ·å°±ä¸éœ€è¦**GC**

#### é”æ¶ˆé™¤

> é”æ¶ˆé™¤<sub>åŒæ­¥çœç•¥</sub>
> > çº¿ç¨‹åŒæ­¥çš„ä»£ä»·ç›¸å½“é«˜ï¼ŒåŒæ­¥çš„åæœæ˜¯é™ä½å¹¶å‘æ€§å’Œæ€§èƒ½\
> > **åŠ¨æ€ç¼–è¯‘**åŒæ­¥å—çš„æ—¶å€™ï¼Œ`JIT`ç¼–è¯‘å™¨å¯ä»¥å€ŸåŠ©[é€ƒé€¸åˆ†æ](#escape-analysis)æ¥åˆ¤æ–­åŒæ­¥å—æ‰€ä½¿ç”¨çš„**é”å¯¹è±¡**æ˜¯å¦åªèƒ½å¤Ÿè¢«**ä¸€ä¸ªçº¿ç¨‹**è®¿é—®è€Œæ²¡æœ‰è¢«å‘å¸ƒåˆ°å…¶ä»–çº¿ç¨‹\
> > å¦‚æœæ²¡æœ‰è¢«å‘å¸ƒåˆ°å…¶ä»–çº¿ç¨‹ï¼Œ`JIT`ç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿™ä¸ªåŒæ­¥å—çš„æ—¶å€™å°±ä¼šå–æ¶ˆè¿™éƒ¨åˆ†ä»£ç çš„åŒæ­¥ï¼Œä»è€Œæé«˜å¹¶å‘æ€§å’Œæ€§èƒ½ã€‚è¿™ä¸ªè¿‡ç¨‹å°±å«**åŒæ­¥çœç•¥**ï¼Œä¹Ÿç§°ä¸º**é”æ¶ˆé™¤**

#### æ ‡é‡æ›¿æ¢

> **æ ‡é‡**<sub>`Scalar`</sub> 
> > ä¸€ä¸ªæ— æ³•å†åˆ†è§£æˆæ›´å°çš„æ•°æ®çš„æ•°æ®ã€‚Javaä¸­çš„**åŸå§‹æ•°æ®ç±»å‹**å°±æ˜¯**æ ‡é‡**<sub>`Scalar`</sub>

> **èšåˆé‡**<sub>`Aggregate`</sub>
> > å¯ä»¥åˆ†è§£çš„æ•°æ®ã€‚javaä¸­çš„**æ™®é€šç±»å¯¹è±¡**å°±æ˜¯**èšåˆé‡**<sub>`Aggregate`</sub>ï¼Œå› ä¸ºå¯ä»¥åˆ†è§£æˆå…¶ä»–**èšåˆé‡**<sub>`Aggregate`</sub>å’Œ**æ ‡é‡**<sub>`Scalar`</sub>

> `JIT`ç¼–è¯‘é˜¶æ®µï¼Œå¦‚æœç»è¿‡[é€ƒé€¸åˆ†æ](#escape-analysis)ï¼Œä¸€ä¸ªå¯¹è±¡ä¸ä¼šè¢«å¤–ç•Œè®¿é—®çš„è¯<sub>æœªå‘ç”Ÿé€ƒé€¸</sub>ï¼Œå°±ä¼šæŠŠè¿™ä¸ªå¯¹è±¡æ‹†è§£æˆè‹¥å¹²ä¸ªå…¶ä¸­åŒ…å«çš„è‹¥å¹²ä¸ªæˆå‘˜å˜é‡æ¥ä»£æ›¿ã€‚è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯**æ ‡é‡æ›¿æ¢**
> - **æ ‡é‡æ›¿æ¢**å¯ä»¥å¤§å¤§å‡å°‘`heap area`å†…å­˜çš„å ç”¨ï¼Œå› ä¸ºä¸€æ—¦ä¸éœ€è¦åˆ›å»ºå¯¹è±¡ï¼Œé‚£ä¹ˆå°±ä¸å†éœ€è¦åˆ†é…`heap area`å†…å­˜
> - **æ ‡é‡æ›¿æ¢**ä¸º[æ ˆä¸Šåˆ†é…](#æ ˆä¸Šåˆ†é…)æä¾›äº†å¾ˆå¥½çš„åŸºç¡€
> - `-XX:+EliminateAllocations`å¼€å¯æ ‡é‡æ›¿æ¢<sub>é»˜è®¤å¼€å¯</sub>ï¼Œå…è®¸å°†å¯¹è±¡**æ‰“æ•£**åˆ†é…åœ¨`jvm stack`ä¸Š
